---
id: web3-price-slippage-impact
category: Web3
subcategory: 基础概念
type: knowledge
title: 滑点与价格影响
---

在 DEX 中，用户经常会看到两个相关概念：**滑点（Slippage）** 和 **价格影响（Price Impact）**。

## 价格影响（Price Impact）

价格影响描述的是：**这笔交易本身对池子价格造成了多大偏移**。

- 由于 AMM 使用恒定乘积公式，池子越浅，单笔交易对价格的影响越大
- 价格影响可以理解为「执行价格」相对于「当前参考价格」的偏差

一个简单的近似公式：

- \[
价格影响 \approx \frac{执行价格 - 当前价格}{当前价格} \times 100\%
\]

在前端中，通常需要：

- 调用合约接口（如 `getAmountsOut`）获取执行价格
- 以池子当前状态为基准计算价格影响
- 使用颜色和提示来突出高价格影响的风险

## 滑点（Slippage）

**滑点**指的是：**交易执行时的实际价格，与用户下单时看到的预期价格之间的差异**。

产生原因包括：

- 区块打包期间，其他交易改变了池子状态
- 预估价格本身存在一定误差
- 网络拥堵导致交易排队时间变长

为了保护用户，DApp 通常允许用户设置「滑点容忍度」：

- 当实际成交价格偏离超过该值时，交易会被回滚

## 滑点容忍度与最小接收数量

在前端构造交易时，会根据滑点容忍度计算：

- 对于 Swap：
  - 预期输出数量：`amountOut`
  - 最小接收数量：`amountOutMin`

示例：

```javascript
// slippage 以基点表示：100 = 1%
const amountOutMin = amountOut * (10000 - slippage) / 10000
```

如果执行时实际输出低于 `amountOutMin`，交易将失败，避免用户在极端情况下被「滑」出很差的价格。

## 前端展示与交互设计

在 DEX 前端，通常会：

- 清晰展示：
  - 预期价格
  - 价格影响（%）
  - 滑点容忍度
  - 最小接收数量
- 使用颜色区分风险：
  - 低价格影响 / 低滑点：绿色
  - 中等：黄色
  - 高风险：橙色或红色，并显示警告文案
- 提供滑点设置：
  - 常用预设（0.1%、0.5%、1%、3% 等）
  - 高级用户的自定义输入

## 关系与区别

- **价格影响**：这笔交易因为池子流动性深度有限，导致价格偏移了多少
- **滑点**：最终执行价格相对于用户预期价格的偏差
- 滑点容忍度是用户设定的「保护阈值」，其中一部分风险来自价格影响

理解滑点与价格影响，有助于你设计出既安全又灵活的 Swap 体验，并在高风险场景下给予用户充分的提示。

