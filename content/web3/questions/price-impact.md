---
id: web3-price-impact
category: Web3
subcategory: 面试题
type: practice
questionType: qa
question: 什么是价格影响（Price Impact）？在 DEX 前端如何计算和显示？
---

**价格影响（Price Impact）**：由于交易对流动性池的影响，大额交易会导致价格偏离当前市场价格。价格影响 = (执行价格 - 当前价格) / 当前价格 × 100%

**计算方法：**

1. **AMM 公式（如 Uniswap V2）**
   ```
   价格影响 = (输入数量 / 池子流动性) × 100%
   ```
   或使用恒定乘积公式：
   ```
   x * y = k
   新价格 = (x + Δx) / (y - Δy)
   价格影响 = (新价格 - 旧价格) / 旧价格
   ```

2. **前端实现**
   - 调用合约的 `getAmountOut` 或类似函数
   - 获取当前池子状态（reserves）
   - 计算执行后的价格变化

**显示策略：**
- **< 0.1%**：绿色，正常交易
- **0.1% - 1%**：黄色，轻微影响
- **1% - 3%**：橙色，中等影响，警告用户
- **> 3%**：红色，高影响，强烈警告或阻止交易

**优化建议：**
- 大额交易建议拆分成多笔小额交易
- 使用多个 DEX 聚合减少价格影响
- 显示流动性深度图表
- 提供"最大价格影响"设置选项
